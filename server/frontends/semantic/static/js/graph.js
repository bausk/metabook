// Generated by CoffeeScript 1.10.0
var init_graph;

$(document).ready(function() {
  var WebSocketTest, counter, makeCounter, messageContainer;
  WebSocketTest = void 0;
  messageContainer = $("#messages");
  WebSocketTest = function(ev) {
    var ws;
    messageContainer.text("WebSocket is supported by your Browser!");
    ws = new WebSocket("ws://" + window.location.host + "/api/session/guise?Id=123456789");
    ws.onopen = function() {
      $('#bSend').on("click", function() {
        return ws.send("New message");
      });
      $('#bClose').on("click", function(ev) {
        ws.close();
        $(messageContainer).text("Connection is forcefully closed");
        $(ev.target).addClass("disabled");
        $('#bSend').addClass("disabled");
        return $('#bConnect').removeClass("disabled");
      });
      $('#bClose').removeClass("disabled");
      $('#bSend').removeClass("disabled");
      return $(ev.target).addClass("disabled");
    };
    ws.onmessage = function(evt) {
      var received_msg;
      received_msg = evt.data;
      return $(messageContainer).text("Message is received..." + received_msg);
    };
    return ws.onclose = function() {
      return $(messageContainer).text("Connection is closed...");
    };
  };
  $('#bConnect').on("click", WebSocketTest);
  makeCounter = function() {
    var count;
    count = 0;
    return {
      increment: function() {
        return count++;
      },
      getCount: function() {
        return count;
      }
    };
  };
  counter = makeCounter();
  $('#bTest1').on("click", function() {
    counter.increment();
    return alert(counter.getCount());
  });
  $.get(metabook.file_api_endpoint + metabook.path, init_graph);
  $("#uiLeftSidebar").sidebar('setting', 'transition', 'overlay');
  $("#uiLeftSidebar").sidebar('setting', 'dimPage', false);
  $("#uiLeftSidebar").sidebar({
    context: $('#uiLeftTable')
  });
  return $("#uiLeftSidebar").sidebar('attach events', '#uiMenuToggle');
});

init_graph = function(graph_json) {
  var source_obj;
  $("#el_file_contents").text(graph_json);
  source_obj = JSON.parse(graph_json);
  return init_jointjs(source_obj);
};

//# sourceMappingURL=graph.js.map
